{
  "name": "lean-collab",
  "description": "Multi-agent collaborative theorem proving with LeanTree and Ensue Memory Network",
  "version": "0.1.0",
  "author": {
    "name": "Sai Vegasena",
    "email": "sai@ensue.dev"
  },
  "agents": ["./agents/decomposer.md", "./agents/lean-prover.md", "./agents/lean-composer.md"],
  "skills": ["./skills/lean-collab"],
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Glob|Grep|Read|Write|Bash",
        "hooks": [
          {
            "type": "command",
            "command": "bash -c 'INPUT=$(cat); P=$(cat .lean-collab.json 2>/dev/null | jq -r \".plugin_path // empty\"); if [ -n \"$P\" ] && [ \"$P\" != \"null\" ]; then echo \"$INPUT\" | bash \"$P/scripts/enforce-ensue-only.sh\"; else echo \"{\\\"decision\\\":\\\"approve\\\"}\"; fi'"
          }
        ]
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "bash -c 'INPUT=$(cat); P=$(cat .lean-collab.json 2>/dev/null | jq -r \".plugin_path // empty\"); if [ -n \"$P\" ] && [ \"$P\" != \"null\" ]; then echo \"$INPUT\" | bash \"$P/scripts/enforce-routing.sh\"; else echo \"{\\\"decision\\\":\\\"approve\\\"}\"; fi'"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash -c 'P=$(cat .lean-collab.json 2>/dev/null | jq -r \".plugin_path // empty\"); [ -n \"$P\" ] && [ \"$P\" != \"null\" ] && bash \"$P/scripts/session-start.sh\" || true'"
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash -c 'P=$(cat .lean-collab.json 2>/dev/null | jq -r \".plugin_path // empty\"); [ -n \"$P\" ] && [ \"$P\" != \"null\" ] && bash \"$P/scripts/session-end.sh\" || true'"
          }
        ]
      }
    ]
  }
}
